parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"HJD/":[function(require,module,exports) {
window.onload=function(){var o=new URLSearchParams(window.location.search);window.vue=new Vue({el:"#app",components:{},data:{profile:"driving",coordinates:null,contours:"15,30,45,60",denoise:1,generalize:5},created:function(){},mounted:function(){this.$nextTick(function(){var e=this;mapboxgl.accessToken=o.get("access_token")||localStorage.getItem("MapboxAccessToken"),this.map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[0,0],zoom:0,hash:!0}),this.map.addControl(new mapboxgl.NavigationControl),this.geolocate=new mapboxgl.GeolocateControl,this.geolocate.on("geolocate",function(o){o&&o.coords&&(e.coordinates=[o.coords.longitude,o.coords.latitude])}),this.map.addControl(this.geolocate),this.geocoder=new MapboxGeocoder({accessToken:mapboxgl.accessToken}),this.geocoder.on("result",function(o){e.coordinates=o.result.center}),this.map.addControl(this.geocoder,"top-left"),this.marker=new mapboxgl.Marker({draggable:!0}),this.marker.on("dragend",function(){e.coordinates=e.marker.getLngLat().toArray()}),this.map.on("style.load",function(){e.map.addSource("isochrones",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.map.addLayer({id:"fill",type:"fill",source:"isochrones",layout:{},paint:{"fill-color":["get","fill"],"fill-opacity":.3}}),e.map.addLayer({id:"outline-shadow",type:"line",source:"isochrones",layout:{},paint:{"line-color":["get","color"],"line-offset":3,"line-opacity":.3,"line-width":6}}),e.map.addLayer({id:"outline",type:"line",source:"isochrones",layout:{"line-join":"round"},paint:{"line-color":["get","color"],"line-opacity":1,"line-width":3}}),e.map.addLayer({id:"label",type:"symbol",source:"isochrones",layout:{"text-field":["to-string",["get","contour"]],"symbol-placement":"line","symbol-spacing":50,"text-font":["Open Sans Bold","Arial Unicode MS Regular"],"text-max-angle":35,"text-offset":[0,.5]},paint:{"text-halo-width":5,"text-halo-color":["get","color"],"text-color":"hsl(0, 0%, 100%)"}})}),this.map.on("load",function(){}),this.map.on("click",function(o){e.coordinates=o.lngLat.wrap().toArray()})})},watch:{coordinates:function(o){this.marker.setLngLat(o).addTo(this.map),this.isochrone()},profile:function(o){this.isochrone()},contours:function(o){this.isochrone()},denoise:function(o){this.isochrone()},generalize:function(o){this.isochrone()}},methods:{isochrone:function(){var o=this,e=new XMLHttpRequest;e.open("GET","https://api.mapbox.com/isochrone/v1/mapbox/".concat(this.profile,"/").concat(this.coordinates,"?contours_minutes=").concat(this.contours,"&polygons=true&generalize=").concat(this.generalize,"&denoise=").concat(this.denoise,"&access_token=").concat(mapboxgl.accessToken)),e.onload=function(){if(100*Math.floor(e.status/100)!=200)return console.error(e.status,e.responseText);var t=JSON.parse(e.responseText);o.map.getSource("isochrones").setData(t),o.map.fitBounds(turf.bbox(t),{padding:20,duration:1e3})},e.send()}}})};
},{}]},{},["HJD/"], null)
//# sourceMappingURL=/isochrone-playground/dist/main.da7cc78e.js.map